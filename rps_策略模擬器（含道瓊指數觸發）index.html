<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å‰ªåˆ€çŸ³é ­å¸ƒï¼šç­–ç•¥æ¨¡æ“¬å™¨ï¼ˆå«é“ç“Šè§¸ç™¼ï¼‰</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { sans: ["Inter", "Noto Sans TC", "system-ui", "-apple-system", "Segoe UI", "Roboto", "sans-serif"] } } }
    }
  </script>
  <style>
    .card { @apply rounded-2xl bg-white/80 dark:bg-zinc-900/80 backdrop-blur shadow p-5; }
    .btn { @apply inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-black text-white dark:bg-white dark:text-black hover:opacity-90 transition; }
    .btn-soft { @apply bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100; }
    .chip { @apply text-xs px-2 py-0.5 rounded-full bg-zinc-200 dark:bg-zinc-700; }
    .kbd { @apply px-2 py-0.5 rounded border border-zinc-300 bg-white text-xs; }
    .grid-auto { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; }
    @media print { .no-print { display: none !important; } }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-zinc-50 to-white dark:from-zinc-950 dark:to-zinc-900 text-zinc-900 dark:text-zinc-100">
  <main class="max-w-6xl mx-auto p-4 md:p-8 space-y-6">
    <header class="flex items-start justify-between gap-4">
      <div>
        <h1 class="text-2xl md:text-3xl font-bold">å‰ªåˆ€çŸ³é ­å¸ƒï¼šç­–ç•¥æ¨¡æ“¬å™¨</h1>
        <p class="text-sm text-zinc-600 dark:text-zinc-400 mt-1">æ”¯æ´ã€Œé«˜ä¸­ä½ã€ä¸‰æª”å‡ºæ‹³ç­–ç•¥ï¼Œä¸¦å¯ä¾é“ç“Šå·¥æ¥­æŒ‡æ•¸ï¼ˆDJIï¼‰ç•¶æ—¥æ¼²è·Œè‡ªå‹•åˆ‡æ›ã€‚ï¼ˆå¯æ‰‹å‹•è¼¸å…¥ï¼Œæˆ–å˜—è©¦æ“·å–ï¼‰</p>
      </div>
      <div class="no-print flex items-center gap-2">
        <button id="toggleTheme" class="btn btn-soft" title="åˆ‡æ›æ·±è‰²/æ·ºè‰²">ğŸŒ— ä¸»é¡Œ</button>
        <a class="btn" href="#" id="dlConfig">â¬‡ï¸ ä¸‹è¼‰è¨­å®š</a>
      </div>
    </header>

    <!-- Config Panels -->
    <section class="grid-auto">
      <div class="card space-y-4">
        <h2 class="font-semibold text-lg">1) é“ç“Šè§¸ç™¼æ¢ä»¶</h2>
        <label class="flex items-center gap-2"><input type="checkbox" id="useDow" class="h-4 w-4"> å•Ÿç”¨ã€Œä¾é“ç“Šæ¼²è·Œè‡ªå‹•é¸æ“‡ç­–ç•¥ã€</label>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
          <div>
            <label class="text-sm">é“ç“Šè®Šå‹•ï¼ˆ%ï¼‰<span class="chip">å¯æ‰‹å¡«</span></label>
            <input id="dowChange" type="number" step="0.01" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800" placeholder="ä¾‹å¦‚ 0.35 æˆ– -0.80" />
          </div>
          <div>
            <label class="text-sm">ä¸Šæ¼²é–€æª» â†’ é¸ <b>é«˜</b></label>
            <input id="thUp" type="number" step="0.01" value="0.50" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800" />
          </div>
          <div>
            <label class="text-sm">ä¸‹è·Œé–€æª» â†’ é¸ <b>ä½</b></label>
            <input id="thDown" type="number" step="0.01" value="-0.50" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800" />
          </div>
        </div>
        <div class="flex gap-2 no-print">
          <button id="fetchDow" class="btn btn-soft" title="å˜—è©¦å¾å…¬é–‹ä¾†æºæ“·å–ï¼›å¯èƒ½å— CORS é™åˆ¶">âš¡ å˜—è©¦æ“·å–ä»Šæ—¥é“ç“Š</button>
          <span class="text-xs text-zinc-500">è‹¥æ“·å–å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¼¸å…¥æˆ–è‡ªè¡Œä¸²æ¥ APIã€‚</span>
        </div>
        <p class="text-sm">è¦å‰‡ï¼šè‹¥è®Šå‹• â‰¥ ä¸Šæ¼²é–€æª» â†’ ä½¿ç”¨ <b>é«˜é¢¨éšª</b>ï¼› â‰¤ ä¸‹è·Œé–€æª» â†’ ä½¿ç”¨ <b>ä½é¢¨éšª</b>ï¼›ä»‹æ–¼å…©è€… â†’ ä½¿ç”¨ <b>ä¸­ç­‰</b>ã€‚</p>
        <p class="text-sm">ç›®å‰è‡ªå‹•åˆ¤å®šï¼š<span id="autoPick" class="font-semibold">ï¼ˆæœªå•Ÿç”¨æˆ–æœªè¼¸å…¥ï¼‰</span></p>
      </div>

      <div class="card space-y-4">
        <h2 class="font-semibold text-lg">2) æ‰‹å‹•ç­–ç•¥ / å°æ‰‹è¡Œç‚º</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div>
            <label class="text-sm">æ‰‹å‹•ç­–ç•¥ï¼ˆæœªå•Ÿç”¨é“ç“Šæ™‚ç”Ÿæ•ˆï¼‰</label>
            <select id="manualStrat" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800">
              <option value="HIGH">é«˜ï¼ˆç©æ¥µååˆ¶å°æ‰‹ä¸Šä¸€æ‰‹ï¼Œ70% æ©Ÿç‡ï¼‰</option>
              <option value="MID" selected>ä¸­ï¼ˆ50% ååˆ¶ / 50% éš¨æ©Ÿï¼‰</option>
              <option value="LOW">ä½ï¼ˆ33% ååˆ¶ / 67% éš¨æ©Ÿï¼‰</option>
            </select>
          </div>
          <div>
            <label class="text-sm">å°æ‰‹æ¨¡å‹</label>
            <select id="oppModel" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800">
              <option value="RANDOM" selected>éš¨æ©Ÿï¼ˆå‡å‹» 1/3ï¼‰</option>
              <option value="MIMIC">æ¨¡ä»¿ï¼ˆ70% æ©Ÿç‡é‡è¤‡æˆ‘æ–¹ä¸Šä¸€æ‰‹ï¼‰</option>
              <option value="COUNTER">ååˆ¶ï¼ˆ70% æ©Ÿç‡å‰‹åˆ¶æˆ‘æ–¹ä¸Šä¸€æ‰‹ï¼‰</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
          <div>
            <label class="text-sm">æ¨¡æ“¬å›åˆæ•¸</label>
            <input id="rounds" type="number" value="200" min="1" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800" />
          </div>
          <div>
            <label class="text-sm">éš¨æ©Ÿç¨®å­ï¼ˆå¯ç©ºç™½ï¼‰</label>
            <input id="seed" type="text" class="mt-1 w-full rounded-xl border px-3 py-2 bg-white/70 dark:bg-zinc-800" placeholder="ä¾‹å¦‚: berkeley-uc" />
          </div>
          <div class="flex items-end"><button id="runSim" class="btn w-full">â–¶ ç«‹å³æ¨¡æ“¬</button></div>
        </div>
      </div>

      <div class="card space-y-4">
        <h2 class="font-semibold text-lg">3) å–®å±€éŠæˆ²</h2>
        <p class="text-sm">æƒ³æ‰‹å‹•ç©ä¸€å±€ï¼Ÿé¸æ“‡ä½ çš„å‡ºæ‹³ï¼Œå³å´æœƒé¡¯ç¤ºé›»è…¦ï¼ˆä¾ç­–ç•¥ï¼‰çš„å‡ºæ‹³èˆ‡å‹è² ã€‚</p>
        <div class="flex flex-wrap gap-2">
          <button class="btn btn-soft" data-play="R">âœŠ çŸ³é ­ (R)</button>
          <button class="btn btn-soft" data-play="P">âœ‹ å¸ƒ (P)</button>
          <button class="btn btn-soft" data-play="S">âœŒï¸ å‰ªåˆ€ (S)</button>
          <span class="text-xs text-zinc-500">éµç›¤å¿«é€Ÿéµï¼š<span class="kbd">R</span>/<span class="kbd">P</span>/<span class="kbd">S</span></span>
        </div>
        <div id="oneRound" class="text-sm"></div>
      </div>
    </section>

    <!-- Results -->
    <section class="card space-y-4">
      <h2 class="font-semibold text-lg">çµæœ</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        <div><div class="text-xs text-zinc-500">ç­–ç•¥ä½¿ç”¨</div><div id="usedStrat" class="text-xl font-bold">â€”</div></div>
        <div><div class="text-xs text-zinc-500">æˆ°ç¸¾</div><div id="wlr" class="text-xl font-bold">â€”</div></div>
        <div><div class="text-xs text-zinc-500">å‹ç‡</div><div id="winrate" class="text-xl font-bold">â€”</div></div>
        <div><div class="text-xs text-zinc-500">æ”¶ç›Šï¼ˆå‹=+1, å’Œ=0, è² =-1ï¼‰</div><div id="score" class="text-xl font-bold">â€”</div></div>
      </div>
      <div class="overflow-auto">
        <table class="min-w-full text-sm whitespace-nowrap">
          <thead class="text-left text-zinc-500">
            <tr><th class="py-2 pr-4">#</th><th class="py-2 pr-4">æˆ‘æ–¹</th><th class="py-2 pr-4">å°æ‰‹</th><th class="py-2 pr-4">çµæœ</th><th class="py-2 pr-4">ç­–ç•¥</th></tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </section>

    <footer class="text-xs text-zinc-500 text-center">
      <p>MIT License Â· å»ºè­°ï¼šæäº¤åˆ° GitHub Pages ç›´æ¥è·‘ï¼ˆç´”å‰ç«¯ï¼‰ã€‚å¦‚éœ€è‡ªå‹•æ“·å–é“ç“Šï¼Œè«‹åœ¨ <code>fetchDow()</code> ä¸­ä¸²æ¥ä½ å¯ç”¨çš„ API æˆ–è‡ªè¡Œæ¶è¨­ proxyã€‚</p>
    </footer>
  </main>

  <script>
    // ---------- Utilities ----------
    const RNG = (seedStr = "") => {
      // xmur3 + sfc32 â€” å¯é‡ç¾äº‚æ•¸
      function xmur3(str){for(var i=0,h=1779033703^str.length;i<str.length;i++)h=Math.imul(h^str.charCodeAt(i),3432918353),h=h<<13|h>>>19;return function(){h=Math.imul(h^h>>>16,2246822507),h=Math.imul(h^h>>>13,3266489909);return (h^h>>>16)>>>0}};
      function sfc32(a,b,c,d){return function(){a>>>=0;b>>>=0;c>>>=0;d>>>=0;var t=(a+b)|0;a=b;b=c;c=d;d=(d<<11|d>>>21)+t|0;return (t>>>0)/4294967296}};
      const seed = xmur3(seedStr || (Date.now()+""));
      return sfc32(seed(), seed(), seed(), seed());
    }

    const MOVES = ["R","P","S"]; // Rock Paper Scissors
    const ICON = { R: "âœŠ", P: "âœ‹", S: "âœŒï¸" };
    const NAME = { R: "çŸ³é ­", P: "å¸ƒ", S: "å‰ªåˆ€" };

    const beats = m => ({R:"S", P:"R", S:"P"}[m]);
    const beatenBy = m => ({R:"P", P:"S", S:"R"}[m]);

    function result(me, opp){
      if(me===opp) return 0; // draw
      return beats(me)===opp ? 1 : -1;
    }

    // ---------- Opponent models ----------
    function makeOpponent(model, rng){
      let lastMine = null;
      return function next( /* myLast */ myLast ){
        lastMine = myLast ?? lastMine;
        if(model === 'RANDOM' || !lastMine){
          return MOVES[Math.floor(rng()*3)];
        }
        if(model === 'MIMIC'){
          // 70% mimic my last
          if(rng() < 0.7) return lastMine;
          return MOVES[Math.floor(rng()*3)];
        }
        if(model === 'COUNTER'){
          // 70% counter my last
          if(rng() < 0.7) return beatenBy(lastMine);
          return MOVES[Math.floor(rng()*3)];
        }
        return MOVES[Math.floor(rng()*3)];
      }
    }

    // ---------- Strategy (High / Mid / Low) ----------
    function decideMyMove(strat, rng, oppLast){
      const base = MOVES[Math.floor(rng()*3)];
      const counter = oppLast ? beatenBy(oppLast) : base;
      if(strat==='HIGH'){
        // Aggressive: 70% choose counter, else random
        return (rng()<0.7 ? counter : base);
      } else if(strat==='MID'){
        return (rng()<0.5 ? counter : base);
      } else { // LOW
        return (rng()<0.33 ? counter : base);
      }
    }

    // ---------- DOW-driven strategy pick ----------
    function pickStratByDow(change, up=0.5, down=-0.5){
      if(change==null || Number.isNaN(change)) return null;
      if(change >= up) return 'HIGH';
      if(change <= down) return 'LOW';
      return 'MID';
    }

    // ---------- Try fetch Dow change (best-effort, may CORS) ----------
    async function fetchDow(){
      // æç¤ºï¼šå—é™æ–¼ CORS èˆ‡ç¬¬ä¸‰æ–¹æ”¿ç­–ï¼Œä»¥ä¸‹åƒ…ç¤ºç¯„æ€§å¯«æ³•ã€‚
      // ä½ å¯ä»¥æ”¹ç‚ºå‘¼å«ä½ è‡ªå·±çš„å¾Œç«¯ï¼Œæˆ–ä½¿ç”¨å…è¨±çš„å…¬é–‹ APIã€‚
      // é€™è£¡å›å‚³ null ä»£è¡¨æŠ“å–å¤±æ•—ã€‚
      try {
        // å˜—è©¦ Yahoo CSVï¼ˆå¤šåŠè¢« CORS æ“‹ä¸‹ï¼Œä¿ç•™ç¤ºä¾‹ï¼‰
        // const res = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/%5EDJI?range=1d&interval=1d');
        // const json = await res.json();
        // const prev = json.chart.result[0].meta.chartPreviousClose;
        // const last = json.chart.result[0].indicators.quote[0].close.at(-1);
        // const pct = ((last - prev) / prev) * 100;
        // return pct;
        return null;
      } catch(e){ return null; }
    }

    // ---------- DOM ----------
    const els = {
      useDow: document.getElementById('useDow'),
      dowChange: document.getElementById('dowChange'),
      thUp: document.getElementById('thUp'),
      thDown: document.getElementById('thDown'),
      autoPick: document.getElementById('autoPick'),
      manualStrat: document.getElementById('manualStrat'),
      oppModel: document.getElementById('oppModel'),
      rounds: document.getElementById('rounds'),
      seed: document.getElementById('seed'),
      runSim: document.getElementById('runSim'),
      rows: document.getElementById('rows'),
      usedStrat: document.getElementById('usedStrat'),
      wlr: document.getElementById('wlr'),
      winrate: document.getElementById('winrate'),
      score: document.getElementById('score'),
      fetchDow: document.getElementById('fetchDow'),
      oneRound: document.getElementById('oneRound'),
      dlConfig: document.getElementById('dlConfig'),
      toggleTheme: document.getElementById('toggleTheme')
    };

    // Theme toggle
    (function(){
      const key = 'rps-theme';
      const saved = localStorage.getItem(key);
      if(saved==='dark') document.documentElement.classList.add('dark');
      els.toggleTheme.addEventListener('click', ()=>{
        document.documentElement.classList.toggle('dark');
        localStorage.setItem(key, document.documentElement.classList.contains('dark') ? 'dark' : 'light');
      });
    })();

    // Persist basic config
    (function(){
      const key = 'rps-config-v1';
      const load = ()=>{ try{ return JSON.parse(localStorage.getItem(key)||'{}')}catch{return {}} };
      const save = (obj)=> localStorage.setItem(key, JSON.stringify(obj));
      const read = ()=>({
        useDow: els.useDow.checked,
        dowChange: parseFloat(els.dowChange.value),
        thUp: parseFloat(els.thUp.value),
        thDown: parseFloat(els.thDown.value),
        manualStrat: els.manualStrat.value,
        oppModel: els.oppModel.value,
        rounds: parseInt(els.rounds.value||'0',10),
        seed: els.seed.value
      });
      const write = (cfg)=>{
        if(cfg.useDow!=null) els.useDow.checked = cfg.useDow;
        if(cfg.dowChange!=null) els.dowChange.value = cfg.dowChange;
        if(cfg.thUp!=null) els.thUp.value = cfg.thUp;
        if(cfg.thDown!=null) els.thDown.value = cfg.thDown;
        if(cfg.manualStrat) els.manualStrat.value = cfg.manualStrat;
        if(cfg.oppModel) els.oppModel.value = cfg.oppModel;
        if(cfg.rounds!=null) els.rounds.value = cfg.rounds;
        if(cfg.seed!=null) els.seed.value = cfg.seed;
        recalcAutoPick();
      };
      const cfg0 = load();
      write(cfg0);
      ['useDow','dowChange','thUp','thDown','manualStrat','oppModel','rounds','seed'].forEach(id=>{
        document.getElementById(id).addEventListener('input', ()=> save(read()));
      });
      els.dlConfig.addEventListener('click', (e)=>{
        e.preventDefault();
        const blob = new Blob([JSON.stringify(read(), null, 2)], {type:'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'rps-config.json'; a.click();
        URL.revokeObjectURL(url);
      });
    })();

    function recalcAutoPick(){
      const use = els.useDow.checked;
      const chg = parseFloat(els.dowChange.value);
      const up = parseFloat(els.thUp.value);
      const dn = parseFloat(els.thDown.value);
      if(!use){ els.autoPick.textContent = 'ï¼ˆæœªå•Ÿç”¨ï¼‰'; return null; }
      const pick = pickStratByDow(chg, up, dn);
      els.autoPick.textContent = pick ? ({HIGH:'é«˜',MID:'ä¸­',LOW:'ä½'}[pick]+'ï¼ˆä¾ '+chg.toFixed(2)+'%ï¼‰') : 'ï¼ˆå°šç„¡æœ‰æ•ˆè®Šå‹•å€¼ï¼‰';
      return pick;
    }

    ['useDow','dowChange','thUp','thDown'].forEach(id=>{
      document.getElementById(id).addEventListener('input', recalcAutoPick);
    });

    els.fetchDow.addEventListener('click', async ()=>{
      els.fetchDow.disabled = true; els.fetchDow.textContent = 'æ“·å–ä¸­â€¦';
      const pct = await fetchDow();
      if(pct==null){ alert('æ“·å–å¤±æ•—ï¼šå¯èƒ½å›  CORS é™åˆ¶æˆ–ä¾†æºä¸å¯ç”¨ã€‚è«‹æ‰‹å‹•è¼¸å…¥æˆ–è‡ªè¡Œä¸²æ¥ APIã€‚'); }
      else { els.dowChange.value = pct.toFixed(2); }
      els.fetchDow.disabled = false; els.fetchDow.textContent = 'âš¡ å˜—è©¦æ“·å–ä»Šæ—¥é“ç“Š';
      recalcAutoPick();
    });

    // ---------- Simulation ----------
    function simulate({ stratPick, oppModel, rounds, seed }){
      const rng = RNG(seed||'');
      const opp = makeOpponent(oppModel, rng);
      let myLast = null, oppLast = null;
      const logs = [];
      let W=0, L=0, D=0, score=0;

      for(let i=1;i<=rounds;i++){
        const myMove = decideMyMove(stratPick, rng, oppLast);
        const oppMove = opp(myLast);
        const res = result(myMove, oppMove);
        if(res>0){W++; score++;} else if(res<0){L++; score--;} else {D++;}
        logs.push({ i, myMove, oppMove, res, strat: stratPick });
        myLast = myMove; oppLast = oppMove;
      }
      return { logs, W, L, D, score };
    }

    function renderTable(logs){
      els.rows.innerHTML = logs.map(({i,myMove,oppMove,res,strat})=>{
        const r = res>0? 'å‹' : res<0? 'è² ' : 'å’Œ';
        const color = res>0? 'text-emerald-600' : res<0? 'text-rose-600' : 'text-zinc-500';
        return `<tr class="border-t border-zinc-200/60 dark:border-zinc-800/60">
          <td class="py-2 pr-4">${i}</td>
          <td class="py-2 pr-4">${ICON[myMove]} ${NAME[myMove]}</td>
          <td class="py-2 pr-4">${ICON[oppMove]} ${NAME[oppMove]}</td>
          <td class="py-2 pr-4 ${color}">${r}</td>
          <td class="py-2 pr-4">${{HIGH:'é«˜',MID:'ä¸­',LOW:'ä½'}[strat]}</td>
        </tr>`
      }).join('');
    }

    function run(){
      const auto = recalcAutoPick();
      const stratPick = (els.useDow.checked && auto) ? auto : els.manualStrat.value;
      const cfg = {
        stratPick,
        oppModel: els.oppModel.value,
        rounds: Math.max(1, parseInt(els.rounds.value||'1',10)),
        seed: els.seed.value||''
      };
      const { logs, W, L, D, score } = simulate(cfg);
      renderTable(logs);
      els.usedStrat.textContent = ({HIGH:'é«˜',MID:'ä¸­',LOW:'ä½'}[stratPick]) + (els.useDow.checked? 'ï¼ˆé“ç“Šï¼‰':'ï¼ˆæ‰‹å‹•ï¼‰');
      els.wlr.textContent = `${W} å‹ / ${L} è²  / ${D} å’Œ`;
      const winrate = (W / (W+L+D)) * 100;
      els.winrate.textContent = isFinite(winrate)? winrate.toFixed(1)+'%' : 'â€”';
      els.score.textContent = String(score);
    }

    els.runSim.addEventListener('click', run);

    // ---------- One-round play ----------
    function computerMoveForOneRound(){
      const auto = recalcAutoPick();
      const stratPick = (els.useDow.checked && auto) ? auto : els.manualStrat.value;
      // å–®å±€æ²’æœ‰å°æ‰‹ä¸Šä¸€æ‰‹è³‡è¨Šï¼Œç­‰åŒæ–¼éš¨æ©Ÿ/ååˆ¶æ¬Šé‡å°ç©ºå€¼
      const rng = RNG();
      return { stratPick, move: decideMyMove(stratPick, rng, null) };
    }

    function playOneRound(humanMove){
      const { stratPick, move: aiMove } = computerMoveForOneRound();
      const res = result(humanMove, aiMove);
      const txt = res>0? 'ä½ è´äº†' : res<0? 'ä½ è¼¸äº†' : 'å¹³æ‰‹';
      els.oneRound.innerHTML = `
        <div class="mt-2 p-3 rounded-xl bg-zinc-100 dark:bg-zinc-800">
          <div>ä½ å‡ºï¼š<b>${ICON[humanMove]} ${NAME[humanMove]}</b></div>
          <div>é›»è…¦ï¼ˆ${{HIGH:'é«˜',MID:'ä¸­',LOW:'ä½'}[stratPick]}ç­–ç•¥ï¼‰å‡ºï¼š<b>${ICON[aiMove]} ${NAME[aiMove]}</b></div>
          <div class="mt-1">çµæœï¼š<b>${txt}</b></div>
        </div>`;
    }

    document.querySelectorAll('[data-play]').forEach(btn=>{
      btn.addEventListener('click', ()=> playOneRound(btn.dataset.play));
    });

    window.addEventListener('keydown', (e)=>{
      const k = e.key.toLowerCase();
      if(k==='r') playOneRound('R');
      if(k==='p') playOneRound('P');
      if(k==='s') playOneRound('S');
    });

    // åˆæ¬¡æ¸²æŸ“
    recalcAutoPick();
  </script>
</body>
</html>
